{% load humanize %}
{% load static %}

<!-- Tarjetas de estadísticas principales -->
<div class="row mt-4">
    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-revenue admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
                <div class="stat-number">${{ ingresos_mes|floatformat:0 }}</div>
                <div class="stat-label">Ingresos del Mes</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-clients admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-users"></i></div>
                <div class="stat-number">{{ total_clientes }}</div>
                <div class="stat-label">Clientes Totales</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-pets admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-paw"></i></div>
                <div class="stat-number">{{ total_mascotas }}</div>
                <div class="stat-label">Mascotas</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-appointments admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-calendar-check"></i></div>
                <div class="stat-number">{{ citas_mes }}</div>
                <div class="stat-label">Citas del Mes</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-sales admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
                <div class="stat-number">${{ ventas_mes_tienda|floatformat:0 }}</div>
                <div class="stat-label">Ventas Tienda</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-products admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-box"></i></div>
                <div class="stat-number">{{ total_productos }}</div>
                <div class="stat-label">Productos</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-notifications admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-bell"></i></div>
                <div class="stat-number">{{ total_notificaciones }}</div>
                <div class="stat-label">Notificaciones</div>
            </div>
        </div>
    </div>

    <div class="col-xl-2 col-md-4 col-6 mb-4">
        <div class="card card-reminders admin-card text-center">
            <div class="card-body">
                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                <div class="stat-number">{{ recordatorios_activos }}</div>
                <div class="stat-label">Recordatorios</div>
            </div>
        </div>
    </div>
</div>

<!-- Gráficos principales -->
<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card admin-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-chart-pie me-2"></i>Distribución de Citas por Estado</h5>
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="estadoCitasChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card admin-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Mascotas por Tipo</h5>
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="tipoMascotasChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Más gráficos -->
<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card admin-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Productos por Categoría</h5>
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="productosCategoriaChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card admin-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-chart-pie me-2"></i>Órdenes por Estado</h5>
            </div>
            <div class="card-body">
                <div class="chart-container">
                    <canvas id="ordenesEstadoChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Gráficos de tendencia -->
<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card admin-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Tendencia de Citas (Últimos 7 Días)</h5>
            </div>
            <div class="card-body">
                <div class="chart-container" style="height: 250px;">
                    <canvas id="tendenciaCitasChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card admin-card">
            <div class="card-header bg-white">
                <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Tendencia de Ventas (Últimos 7 Días)</h5>
            </div>
            <div class="card-body">
                <div class="chart-container" style="height: 250px;">
                    <canvas id="tendenciaVentasChart"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Datos para los gráficos
const citasPorEstado = {{ citas_por_estado_json|safe }};
const mascotasPorTipo = {{ mascotas_por_tipo_json|safe }};
const productosPorCategoria = {{ productos_por_categoria_json|safe }};
const ordenesPorEstado = {{ ordenes_por_estado_json|safe }};
const citasUltimos7Dias = {{ citas_ultimos_7_dias_json|safe }};
const ventasUltimos7Dias = {{ ventas_ultimos_7_dias_json|safe }};
</script>
<script src="{% static 'administracion/js/overview_tab.js' %}"></script>